# 社交媒体爬虫工具 使用说明

## 功能介绍

这是一个功能完善的社交媒体爬虫工具，支持爬取微博和抖音指定账号的帖子，并提供可视化界面进行管理和查看。

### 主要功能

- ✅ **多平台支持**: 支持微博和抖音平台
- ✅ **用户管理**: 可配置多个目标用户账号
- ✅ **实时爬取**: 实时获取最新帖子内容
- ✅ **数据存储**: 使用SQLite数据库持久化存储
- ✅ **可视化界面**: 现代化的PyQt5桌面应用界面
- ✅ **帖子展示**: 表格展示帖子列表，支持查看详情
- ✅ **任务管理**: 灵活的爬取任务配置和管理
- ✅ **配置管理**: 完善的配置系统
- ✅ **日志记录**: 详细的运行日志
- ✅ **跨平台**: 支持Windows、macOS打包

## 快速开始

### 1. 环境要求

- Python 3.8 或更高版本
- Windows 10/11 或 macOS 10.14+

### 2. 安装依赖

```bash
# 安装Python依赖包
pip install -r requirements.txt
```

### 3. 运行程序

```bash
# 开发模式运行
python run.py

# 或直接运行主程序
python main.py
```

## 使用指南

### 界面说明

程序界面分为三个主要标签页:

#### 1. 📝 帖子列表

- 展示所有已爬取的帖子
- 支持按平台筛选
- 支持关键词搜索
- 双击查看帖子详情
- 显示点赞、评论、分享等统计数据

#### 2. ⚙️ 任务管理

- **添加爬取任务**:
  1. 选择平台(微博/抖音)
  2. 输入用户ID或用户名
  3. 设置爬取帖子数量
  4. 点击"开始爬取"

- **用户列表**: 
  - 显示已配置的所有用户
  - 双击快速爬取该用户
  - 可删除不需要的用户

- **运行日志**: 
  - 实时显示爬取进度
  - 记录所有操作信息

#### 3. 🔧 设置

- **微博配置**: 启用/禁用、爬取间隔、最大帖子数
- **抖音配置**: 启用/禁用、爬取间隔、最大帖子数
- **代理配置**: HTTP/HTTPS代理设置
- **通知配置**: 新帖子提醒设置

### 使用流程

1. **首次使用**:
   - 启动程序
   - 切换到"任务管理"页
   - 添加要爬取的用户

2. **开始爬取**:
   - 输入用户ID(微博支持用户名)
   - 点击"开始爬取"按钮
   - 在日志中查看进度

3. **查看帖子**:
   - 切换到"帖子列表"页
   - 使用筛选和搜索功能
   - 双击查看详细内容

4. **配置管理**:
   - 在"设置"页修改配置
   - 点击"保存配置"使设置生效

## 打包为Windows可执行文件

### 方法一: 使用打包脚本

```bash
python build.py
```

### 方法二: 使用spec文件

```bash
# 生成spec文件
python build_spec.py

# 使用spec文件打包
pyinstaller crawler.spec
```

打包完成后，可执行文件位于 `dist` 目录中。

## 数据说明

### 数据库

程序使用SQLite数据库存储数据，位于 `data/crawler.db`

**数据表**:
- `users`: 用户信息表
- `posts`: 帖子信息表

### 配置文件

配置文件位于 `config/user_config.json`，可手动编辑。

### 日志文件

日志文件位于 `logs/crawler.log`

## 平台说明

### 微博爬虫

- 使用微博移动端API
- 支持用户名或UID
- 可爬取用户基本信息和帖子列表
- 包含文本、图片、视频、统计数据

### 抖音爬虫

**注意**: 抖音有较强的反爬机制，当前版本提供了两种实现:

1. **DouyinCrawler**: 真实爬虫框架(需要配置cookie和签名)
2. **DouyinMockCrawler**: 模拟爬虫(用于演示和测试)

默认使用模拟爬虫。如需真实爬取，需要:
- 获取有效的抖音cookie
- 实现X-Bogus签名算法
- 或使用第三方API服务

## 常见问题

### Q: 微博爬取失败?

A: 可能原因:
- 用户ID/用户名错误
- 网络连接问题
- 需要配置代理
- 微博API调整

### Q: 抖音为什么显示模拟数据?

A: 抖音反爬机制较强，默认使用模拟数据用于演示。真实爬取需要额外配置。

### Q: 如何设置代理?

A: 在"设置"页面，启用代理并填写代理地址，如: `http://127.0.0.1:7890`

### Q: 程序可以自动定时爬取吗?

A: 当前版本需要手动触发爬取。可以在配置中设置爬取间隔，未来版本将支持自动定时任务。

## 技术架构

```
coin_tool/
├── main.py              # 主程序入口
├── config.py            # 配置管理
├── run.py               # 开发运行脚本
├── requirements.txt     # 依赖包列表
├── build.py             # 打包脚本
├── models/              # 数据模型
│   ├── __init__.py
│   └── database.py      # 数据库操作
├── crawler/             # 爬虫模块
│   ├── __init__.py
│   ├── base.py          # 爬虫基类
│   ├── weibo_crawler.py # 微博爬虫
│   ├── douyin_crawler.py# 抖音爬虫
│   └── manager.py       # 爬虫管理器
├── gui/                 # 界面模块
│   ├── __init__.py
│   ├── main_window.py   # 主窗口
│   ├── post_list.py     # 帖子列表
│   ├── task_panel.py    # 任务管理
│   └── config_panel.py  # 配置面板
├── utils/               # 工具模块
│   ├── __init__.py
│   └── logger.py        # 日志工具
├── data/                # 数据目录(自动创建)
├── logs/                # 日志目录(自动创建)
└── config/              # 配置目录(自动创建)
```

## 注意事项

1. **合法使用**: 请遵守相关平台的使用条款，合理使用爬虫工具
2. **频率控制**: 避免频繁请求，建议设置合理的爬取间隔
3. **隐私保护**: 请勿爬取和传播私人或敏感信息
4. **网络环境**: 某些网络环境可能需要配置代理

## 更新日志

### v1.0 (2026-01-19)

- ✨ 初始版本发布
- ✅ 微博爬虫支持
- ✅ 抖音爬虫框架
- ✅ PyQt5可视化界面
- ✅ SQLite数据存储
- ✅ 配置管理系统
- ✅ Windows打包支持

## 许可证

本项目仅供学习和研究使用。

## 联系方式

如有问题或建议，欢迎反馈。
